{"pageProps":{"post":{"title":"追求行動","slug":"f720babe","content":"<h2>実行例</h2>\n<p><img src=\"./static/images/f720babe/0.png\" alt=\"\">\n<a href=\"./static/play/f720babe/index.html\">実行結果を見る</a></p>\n<h2>ソースコード</h2>\n<h3>TypeScript</h3>\n<p><a href=\"./static/code/f720babe/vehicle.ts\">vehicle.ts</a> / <a href=\"./static/code/f720babe/app.ts\">app.ts</a></p>\n<h2>解説/アルゴリズム</h2>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">seek</span><span class=\"token punctuation\">(</span>v<span class=\"token operator\">:</span> Vehicle<span class=\"token punctuation\">,</span> target<span class=\"token operator\">:</span> p5<span class=\"token punctuation\">.</span>Vector<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> desiredVelocity <span class=\"token operator\">=</span> p5<span class=\"token punctuation\">.</span>Vector<span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  desiredVelocity<span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>maxSpeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> force <span class=\"token operator\">=</span> p5<span class=\"token punctuation\">.</span>Vector<span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span>desiredVelocity<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  v<span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>force<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>この追求行動(seek)では、引数に渡した位置に向けて、現在位置から 1 フレームで移動できるだけ移動しようという行動です。</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\">desiredVelocity<span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>maxSpeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>現在位置(position)から目標位置(target)までのベクトルを求めます。</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\">desiredVelocity<span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>maxSpeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>1 フレームで移動できる距離を求めるため、maxSpeed でベクトルの制限を行います。</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> force <span class=\"token operator\">=</span> p5<span class=\"token punctuation\">.</span>Vector<span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span>desiredVelocity<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">.</span>velocity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nv<span class=\"token punctuation\">.</span>acceleration<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>force<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>上で求めた速度と今現在の速度の差分を求め、加速度に加えます。</p>\n"}},"__N_SSG":true}