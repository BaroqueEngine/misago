{"pageProps":{"post":{"title":"指定した範囲のランダムな値を返す","slug":"4ab85eb3","content":"<h2>コード例</h2>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// min以上max未満のランダムな値を返す</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">range</span><span class=\"token punctuation\">(</span>min<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> max<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> min <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>max <span class=\"token operator\">-</span> min<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// min以上max以下のランダムな整数を返す</span>\n<span class=\"token comment\">// max未満にしたい場合は下記の+1を削除する</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">rangeInt</span><span class=\"token punctuation\">(</span>min<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> max<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">{</span>\n  min <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>min<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  max <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>max<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span>min<span class=\"token punctuation\">,</span> max <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> range<span class=\"token punctuation\">,</span> rangeInt <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./random\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 79.59292871067693</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">rangeInt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 11</span>\n</code></pre>\n<h2>ソースコード</h2>\n<p><a href=\"./static/code/4ab85eb3/random.ts\">random.ts</a> / <a href=\"./static/code/4ab85eb3/app.ts\">app.ts</a></p>\n<h2>解説/アルゴリズム</h2>\n<p>min ～ max の範囲は<code>max - min</code>で求めます。<br>\n<code>max - min</code>と Math.random()を掛けあわせ、0 以上<code>max - min</code>未満の乱数を作ります。<br>\n下限が 0 になっているので min を足し合わせることで、min 以上 max - min + min 未満の乱数、つまり min 以上 max 未満の乱数を作ります。</p>\n<p>整数に変換をする場合はまず引数で渡された min と max を整数に変換する必要があります。<br>\n例えば min = 3 なら整数なので 3 のままですが、3.2 のような値だと min 以上の整数に該当する最小値は 4 になります。ですので min に対して<a href=\"/286b997e/\">切り上げ処理</a>を行います。<br>\n同じように max も整数ならそのまま、5.6 のような値だと max 以下の整数に該当する最大値は 5 になるので、max に対して<a href=\"/0fd2eac9/\">切り捨て処理</a>を行います。</p>\n<p>あとは min と max を range()に渡せばいいですが、個人的には整数の乱数の場合、min 以上 max 以下の範囲が便利だと思っているので、range(min, max + 1)を渡すようにしています。</p>\n<h2>内部で利用しているアルゴリズム</h2>\n<p><a href=\"/e14deb99/\">擬似乱数</a>, <a href=\"/286b997e/\">天井関数</a>, <a href=\"/0fd2eac9/\">床関数</a></p>\n"}},"__N_SSG":true}