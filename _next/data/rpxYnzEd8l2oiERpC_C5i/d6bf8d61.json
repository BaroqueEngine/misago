{"pageProps":{"post":{"title":"2点間距離（ループ対応）","slug":"d6bf8d61","content":"<h2>解説/アルゴリズム</h2>\n<svg width=\"500\" height=\"100%\" viewBox=\"0 0 500 300\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" style=\"border: 1px solid rgb(85, 85, 85);\">\n  <line x1=\"50\" y1=\"60\" x2=\"400\" y2=\"160\" stroke=\"#e06666\" stroke-width=\"2\"></line>\n  <line x1=\"-100\" y1=\"160\" x2=\"50\" y2=\"60\" stroke=\"#3c94bb\" stroke-width=\"2\"></line>\n  <line x1=\"400\" y1=\"160\" x2=\"550\" y2=\"60\" stroke=\"#3c94bb\" stroke-width=\"2\"></line>\n  <text x=\"50\" y=\"44\" text-anchor=\"middle\" alignment-baseline=\"middle\" fill=\"#fff\">A</text>\n  <text x=\"400\" y=\"180\" text-anchor=\"middle\" alignment-baseline=\"middle\" fill=\"#fff\">B</text>\n  <circle cx=\"50\" cy=\"60\" r=\"4\" fill=\"#fff\"></circle>\n  <circle cx=\"400\" cy=\"160\" r=\"4\" fill=\"#fff\"></circle>\n  <line x1=\"100\" y1=\"240\" x2=\"150\" y2=\"240\" stroke=\"#e06666\" stroke-width=\"2\"></line>\n  <line x1=\"300\" y1=\"240\" x2=\"350\" y2=\"240\" stroke=\"#3c94bb\" stroke-width=\"2\"></line>\n  <text x=\"170\" y=\"240\" text-anchor=\"middle\" alignment-baseline=\"middle\" fill=\"#fff\">364</text>\n  <text x=\"370\" y=\"240\" text-anchor=\"middle\" alignment-baseline=\"middle\" fill=\"#fff\">180</text>\n</svg>\n<p>上記例で見ると、点 AB の<a href=\"/b98d6da4\">2 点間距離</a>は赤線になるが、外側がループしている条件なら青線も 2 点間距離になる。この条件の場合、通常は赤線と青線の短い方を 2 点間距離として採用する。</p>\n<p>計算は軸ごとに行う。下記は x 軸の場合について。</p>\n<svg width=\"500\" height=\"100%\" viewBox=\"0 0 500 100\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\n  <line x1=\"0\" y1=\"50\" x2=\"50\" y2=\"50\" stroke=\"#3c94bb\" stroke-width=\"2\"></line>\n  <line x1=\"200\" y1=\"50\" x2=\"250\" y2=\"50\" stroke=\"#3c94bb\" stroke-width=\"2\"></line>\n  <line x1=\"50\" y1=\"50\" x2=\"200\" y2=\"50\" stroke=\"#e06666\" stroke-width=\"2\"></line>\n  <rect x=\"0\" y=\"0\" width=\"250\" height=\"100\" fill=\"none\" stroke=\"#555\"></rect>\n  <circle cx=\"50\" cy=\"50\" r=\"4\" fill=\"#fff\"></circle>\n  <circle cx=\"200\" cy=\"50\" r=\"4\" fill=\"#fff\"></circle>\n  <circle cx=\"300\" cy=\"50\" r=\"4\" fill=\"#3c94bb\"></circle>\n  <line x1=\"250\" y1=\"50\" x2=\"300\" y2=\"50\" stroke=\"#3c94bb\" stroke-dasharray=\"4 4\"></line>\n  <text x=\"300\" y=\"34\" text-anchor=\"middle\" alignment-baseline=\"middle\" fill=\"#3c94bb\">A</text>\n  <text x=\"50\" y=\"34\" text-anchor=\"middle\" alignment-baseline=\"middle\" fill=\"#fff\">A</text>\n  <text x=\"200\" y=\"34\" text-anchor=\"middle\" alignment-baseline=\"middle\" fill=\"#fff\">B</text>\n</svg>\n<p>内側の赤線と外側の青線の長さの小さい方を x 軸の長さとして採用する。</p>\n<p>赤線の長さの計算は A と B の<a href=\"/b98d6da4\">差の絶対値</a>を取る。</p>\n<p>外側の青線は 2 本あるので別々に計算して総和を求めてもいいが、左側にある点に幅の長さを足した位置を求め、そこから右側の点までの距離が青線の長さと同じになるので、それを求める方法がある。</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 2点のうちどちらが左でどちらが右になるかを計算</span>\n<span class=\"token keyword\">const</span> minX <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 左</span>\n<span class=\"token keyword\">const</span> maxX <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 右</span>\n\n<span class=\"token comment\">// 内側（赤線）の距離と、外側（青線）の距離のうち、小さい方をx軸の長さとして採用。</span>\n<span class=\"token keyword\">const</span> dx <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>maxX <span class=\"token operator\">-</span> minX<span class=\"token punctuation\">,</span> minX <span class=\"token operator\">+</span> width <span class=\"token operator\">-</span> maxX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>x 軸の計算例。</p>\n<p>y 軸も同様に計算し、求めた x と y の長さで三平方の定理を使用して<a href=\"/b98d6da4\">2 点間距離</a>を求める。</p>\n<h2>コード例</h2>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getDistance</span><span class=\"token punctuation\">(</span>\n  x0<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  y0<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  x1<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  y1<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  width<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> minX <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> maxX <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> minY <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>y0<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> maxY <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>y0<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> dx <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>maxX <span class=\"token operator\">-</span> minX<span class=\"token punctuation\">,</span> minX <span class=\"token operator\">+</span> width <span class=\"token operator\">-</span> maxX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> dy <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>maxY <span class=\"token operator\">-</span> minY<span class=\"token punctuation\">,</span> minY <span class=\"token operator\">+</span> height <span class=\"token operator\">-</span> maxY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>dx <span class=\"token operator\">*</span> dx <span class=\"token operator\">+</span> dy <span class=\"token operator\">*</span> dy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2>ソースコード</h2>\n<p><a href=\"./static/code/d6bf8d61/app.ts\">app.ts</a></p>\n<h2>関連記事</h2>\n<ul>\n<li><a href=\"/b98d6da4\">2 点間の直線距離</a></li>\n</ul>\n"}},"__N_SSG":true}