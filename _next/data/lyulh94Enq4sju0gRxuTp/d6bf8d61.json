{"pageProps":{"post":{"title":"2点間距離（ループ対応）","slug":"d6bf8d61","content":"<h2>解説/アルゴリズム</h2>\n<p><img src=\"./static/images/d6bf8d61/0.png\" alt=\"\"></p>\n<p>上記例で見ると、点 AB の<a href=\"/b98d6da4/\">2 点間距離</a>は赤線になりますが、外側がループしている条件なら青線も 2 点間距離になります。</p>\n<p>この条件の場合、通常は赤線と青線の短い方を 2 点間距離として採用しますので、その値の求め方を解説します。<br>\n計算は軸ごとに行うので、まず x 軸の場合について解説します。</p>\n<p><img src=\"./static/images/d6bf8d61/1.png\" alt=\"\"></p>\n<p>内側の赤線と外側の青線の長さの小さい方を x 軸の長さとして採用します。<br>\n赤線の長さの計算は A と B の<a href=\"/b98d6da4/\">差の絶対値</a>を取ればいいでしょう。<br>\n外側の青線は 2 本あるので別々に計算して総和を求めてもいいですが、左側にある点に幅の長さを足した位置を求め、そこから右側の点までの距離が青線の長さと同じになるので、それを求める方法があります。</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// 2点のうちどちらが左でどちらが右になるかを計算</span>\n<span class=\"token keyword\">const</span> minX <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 左</span>\n<span class=\"token keyword\">const</span> maxX <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 右</span>\n\n<span class=\"token comment\">// 内側（赤線）の距離と、外側（青線）の距離のうち、小さい方をx軸の長さとして採用。</span>\n<span class=\"token keyword\">const</span> dx <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>maxX <span class=\"token operator\">-</span> minX<span class=\"token punctuation\">,</span> minX <span class=\"token operator\">+</span> width <span class=\"token operator\">-</span> maxX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>x 軸の計算例です。<br>\ny 軸も同様に計算し、求めた x と y の長さで三平方の定理を使用して 2 点間距離を求めます。</p>\n<h2>コード例</h2>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getDistance</span><span class=\"token punctuation\">(</span>\n  x0<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  y0<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  x1<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  y1<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  width<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> minX <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> maxX <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> minY <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>y0<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> maxY <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>y0<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> dx <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>maxX <span class=\"token operator\">-</span> minX<span class=\"token punctuation\">,</span> minX <span class=\"token operator\">+</span> width <span class=\"token operator\">-</span> maxX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> dy <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>maxY <span class=\"token operator\">-</span> minY<span class=\"token punctuation\">,</span> minY <span class=\"token operator\">+</span> height <span class=\"token operator\">-</span> maxY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>dx <span class=\"token operator\">*</span> dx <span class=\"token operator\">+</span> dy <span class=\"token operator\">*</span> dy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2>ソースコード</h2>\n<p><a href=\"./static/code/d6bf8d61/app.ts\">app.ts</a></p>\n"}},"__N_SSG":true}