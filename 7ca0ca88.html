<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="description" content="グラフィックスプログラミング関連技術についての覚え書き"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.3/dist/katex.min.css" integrity="sha384-ThssJ7YtjywV52Gj4JE/1SQEDoMEckXyhkFVwaf4nDSm5OBlXeedVYjuuUd0Yua+" crossorigin="anonymous"/><title>三角関数 | みさご解体新書</title><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/221f4a221a6f7cf28bbb.css" as="style"/><link rel="stylesheet" href="/_next/static/css/221f4a221a6f7cf28bbb.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f65239b735f6c45be5c8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f65239b735f6c45be5c8.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-92300432a1172ef1338b.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-899697ea82bdc85e7a94.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-752bd3b6185152c691e4.js" as="script"/><link rel="preload" href="/_next/static/chunks/996-fa0b52be06882e958afa.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/%5Bslug%5D-25c36ff5ddc314efe2d1.js" as="script"/></head><body class="bg-bg-color"><div id="__next"><div class="min-h-screen bg-bg-color text-white"><main><div class="container mx-auto max-w-full"><h2 class="bg-gray-700 font-index text-lg text-gray-300 py-7 px-7"><a href="/">みさご解体新書</a></h2><article class="px-8 py-20"><h1 class="font-index text-3xl font-bold mb-16 text-center">三角関数</h1><div class="max-w-4xl mx-auto"><div class="markdown-styles_markdown__1x9gM"><h2>コード例</h2>
<pre class="language-typescript"><code class="language-typescript"><span class="token comment">// rad = ラジアン角度</span>
Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span>
Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span>
Math<span class="token punctuation">.</span><span class="token function">tan</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span>
Math<span class="token punctuation">.</span><span class="token function">atan</span><span class="token punctuation">(</span>tan<span class="token punctuation">)</span><span class="token punctuation">;</span>
Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2>解説/アルゴリズム</h2>
<h3>コサイン/サイン（cos/sin）</h3>
<p><img src="./static/images/7ca0ca88/0.png" alt=""></p>
<p>半径 1 の円を用意して、円の中央位置が原点(0, 0)になるように配置します。<br>
原点から角 θ の方向に長さ 1 だけ進んだ位置、つまり円周上にある点の位置を求めます。</p>
<p>進む距離（上記画像の青線）を 1 と固定すれば、角 θ によって点(x, y)が決まるといえます。<br>
具体的な点(x, y)を求めるには、三角関数の cos / sin という機能を使用します。</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token function">cos</span><span class="token punctuation">(</span>角θ<span class="token punctuation">)</span> <span class="token operator">=</span> 角θ方向に<span class="token number">1</span>進んだときのx座標を計算する<span class="token punctuation">;</span>
<span class="token function">sin</span><span class="token punctuation">(</span>角θ<span class="token punctuation">)</span> <span class="token operator">=</span> 角θ方向に<span class="token number">1</span>進んだときのy座標を計算する<span class="token punctuation">;</span>
</code></pre>
<p>通常は、sin(角 θ)を sinθ、cos(角 θ)を cosθ と書きます。</p>
<pre class="language-typescript"><code class="language-typescript">sin30° <span class="token operator">=</span> <span class="token number">30</span>°方向に<span class="token number">1</span>進んだときのx座標を計算する
cos30° <span class="token operator">=</span> <span class="token number">30</span>°方向に<span class="token number">1</span>進んだときのy座標を計算する
</code></pre>
<p>角度が具体的に決まっている場合、たとえば角度が 30° だと、sin30° / cos30° と書きます。</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> deg <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// 30°</span>
Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 角度を指定してはいけない。</span>

<span class="token keyword">const</span> rad <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span> <span class="token comment">// 角をラジアンに変換。</span>
Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 正しい値が返却される。</span>
</code></pre>
<p>次は実際に JavaScript に実装されている三角関数を使用してみます。<br>
sin / cos は Math クラスに実装されており、Math.cos() / Math.sin()で利用できます。</p>
<p>引数には角度を指定するのですが、わたしたちが普段使用している 0° ～ 360° の角度を指定することは出来ません。<br>
代わりにラジアンという単位の角度を指定します。</p>
<p>ラジアンについては<a href="/mathradian/">専用の記事</a>を用意しているので詳しくはリンク先を参照してください。<br>
簡略に説明すると、角度からラジアンに変換するには、角度 * 円周率 / 180 という計算になります。<br>
円周率の値は Math.PI で参照できます。</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> deg <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// 30°</span>
<span class="token keyword">const</span> rad <span class="token operator">=</span> <span class="token punctuation">(</span>deg <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span> <span class="token comment">// 角をラジアンに変換。</span>

Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.5</span>
Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.8660...</span>
</code></pre>
<p>上記の結果で、30° の方向に 1 進んだときの、x 座標が 0.5、y 座標がおよそ 0.8660 だということがわかります。</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> deg <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// -30°</span>
<span class="token keyword">const</span> rad <span class="token operator">=</span> <span class="token punctuation">(</span>deg <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span> <span class="token comment">// 角をラジアンに変換。</span>

Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -0.5</span>
Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.8660...</span>
</code></pre>
<p>0 を原点とした座標なので、sin/cos の結果がマイナスになる場合もあります。<br>
上記コードのように-30° の方向に 1 進んだ y 座標はマイナス値になります。</p>
<h3>θ 方向に進む距離を可変にする場合</h3>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 青線の長さ</span>
<span class="token keyword">const</span> deg <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// 30°</span>
<span class="token keyword">const</span> rad <span class="token operator">=</span> <span class="token punctuation">(</span>deg <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span> <span class="token comment">// 角をラジアンに変換。</span>

Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span> <span class="token operator">*</span> r<span class="token punctuation">;</span> <span class="token comment">// 2.5</span>
Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>rad<span class="token punctuation">)</span> <span class="token operator">*</span> r<span class="token punctuation">;</span> <span class="token comment">// 4.3301...</span>
</code></pre>
<p>θ 方向に進む距離を 1 ではなく任意の距離にしたい場合があります。<br>
先に結論をいうと、距離を<code>r</code>と置くと、x 座標は<code>sinθ * r</code>、y 座標は<code>cosθ * r</code>で求まります。</p>
<p><img src="./static/images/7ca0ca88/1.png" alt=""></p>
<p>(x, y), (x, 0), (0, 0)を結ぶと、直角三角形ができるのがわかります。<br>
ここで青線の長さを変えた場合、同じように点を結んで、できる形はやはり直角三角形で、角 θ の角度は変わりません。</p>
<p>2 つの三角形を用意して、2 つの角が共通の場合、その 2 つの三角形は形が同じでスケールが違うだけの関係と証明することができ、相似の条件といいます。</p>
<p>上記画像にある青線の長さ 1 の三角形も、長さを r にした三角形も、角 θ と直角が共通しているので、２つの三角形は相似である、ということがわかります。</p>
<p>相似であると、各辺の比は、辺の長さに関わらず常に同じなるという特徴があります。<br>
青線の長さを 1 から r に変えるということは長さを r 倍にするということなので、相似の三角形の辺である、緑線・赤線の長さも r 倍になります。</p>
<p>緑線・赤線はそれぞれ青線を引いた先の(x, y)に対応しています。<br>
ですので、青線の長さを r 倍にすると、x(cosθ)が r 倍、y(sinθ)が r 倍になります。</p>
<h3>タンジェント（tan）</h3>
<p>原点(0, 0)から(cosθ, sinθ)まで直線を引いたときの角度、つまり直線と x 軸とのなす角 θ の傾きを tanθ と表します。</p>
<p>直線の傾きは<code>yの増加量 / xの増加量</code>で求められますから、<code>tanθ = sinθ / cosθ</code>と考えることができます。</p>
<h3>アークタンジェント（atan/atan2）</h3>
<pre class="language-typescript"><code class="language-typescript">Math<span class="token punctuation">.</span><span class="token function">atan</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ラジアン値で返却される</span>
</code></pre>
<p>atan(x)は tanθ = x となる θ を計算します。</p>
<p>つまり直線の傾きを入れると θ を計算してくれるわけです。</p>
<p>たとえば atan(1)の場合、傾きが 1 となる角度ですから 45 度に応じたラジアン値（0.7853...）が返却されます。</p>
<p>この関数が返す値の範囲は角度で言うと-90 度～ 90 度までとなります。</p>
<p>というのも、円一周 360 度で考えると、傾きが 1 になる角度は、45 度だけではなく 225 度でも同様なのですが、これだと atan はどちらを返せばいいのかが分からなくなりますので、180 度の範囲で限定されているわけです。</p>
<p>45 度と 225 度を区別するように範囲を 0 ～ 360 度で考えたい場合は、代替となる atan2 という関数を使用します。</p>
<pre class="language-typescript"><code class="language-typescript">Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ラジアン値で返却される</span>
</code></pre>
<p>atan2(y, x)は tanθ = y / x となる θ を計算します。<br>
(y, x)と y を先に指定するので注意が必要です。</p>
<p>atan(x)と違い、引数には傾きを求める計算前の(y, x)を指定するので、例えば傾きが 45 度で同じになる(1, 1)と(-1, -1)が区別できます。</p>
<p>タンジェントの逆関数の値を計算したい場合は atan を、点の偏角を求めたい場合は atan2()を使用するといいでしょう。</p>
<h2>内部で利用しているアルゴリズム</h2>
<p><a href="/13cc4d6d">ラジアン</a></p>
</div></div></article></div></main></div><footer class="bg-gray-700 text-gray-300"><div class="container mx-auto max-w-full"><div class="py-12 flex flex-col items-center"><h3 class="text-base text-center">miku / BAROQUE ENGINE</h3></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"三角関数","slug":"7ca0ca88","content":"\u003ch2\u003eコード例\u003c/h2\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token comment\"\u003e// rad = ラジアン角度\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etan\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eatan\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etan\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eatan2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e解説/アルゴリズム\u003c/h2\u003e\n\u003ch3\u003eコサイン/サイン（cos/sin）\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"./static/images/7ca0ca88/0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e半径 1 の円を用意して、円の中央位置が原点(0, 0)になるように配置します。\u003cbr\u003e\n原点から角 θ の方向に長さ 1 だけ進んだ位置、つまり円周上にある点の位置を求めます。\u003c/p\u003e\n\u003cp\u003e進む距離（上記画像の青線）を 1 と固定すれば、角 θ によって点(x, y)が決まるといえます。\u003cbr\u003e\n具体的な点(x, y)を求めるには、三角関数の cos / sin という機能を使用します。\u003c/p\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token function\"\u003ecos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e角θ\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e 角θ方向に\u003cspan class=\"token number\"\u003e1\u003c/span\u003e進んだときのx座標を計算する\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token function\"\u003esin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e角θ\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e 角θ方向に\u003cspan class=\"token number\"\u003e1\u003c/span\u003e進んだときのy座標を計算する\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e通常は、sin(角 θ)を sinθ、cos(角 θ)を cosθ と書きます。\u003c/p\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003esin30° \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e30\u003c/span\u003e°方向に\u003cspan class=\"token number\"\u003e1\u003c/span\u003e進んだときのx座標を計算する\ncos30° \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e30\u003c/span\u003e°方向に\u003cspan class=\"token number\"\u003e1\u003c/span\u003e進んだときのy座標を計算する\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e角度が具体的に決まっている場合、たとえば角度が 30° だと、sin30° / cos30° と書きます。\u003c/p\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e deg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e30\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 30°\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edeg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 角度を指定してはいけない。\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e rad \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e30\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e Math\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token constant\"\u003ePI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e180\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 角をラジアンに変換。\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 正しい値が返却される。\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e次は実際に JavaScript に実装されている三角関数を使用してみます。\u003cbr\u003e\nsin / cos は Math クラスに実装されており、Math.cos() / Math.sin()で利用できます。\u003c/p\u003e\n\u003cp\u003e引数には角度を指定するのですが、わたしたちが普段使用している 0° ～ 360° の角度を指定することは出来ません。\u003cbr\u003e\n代わりにラジアンという単位の角度を指定します。\u003c/p\u003e\n\u003cp\u003eラジアンについては\u003ca href=\"/mathradian/\"\u003e専用の記事\u003c/a\u003eを用意しているので詳しくはリンク先を参照してください。\u003cbr\u003e\n簡略に説明すると、角度からラジアンに変換するには、角度 * 円周率 / 180 という計算になります。\u003cbr\u003e\n円周率の値は Math.PI で参照できます。\u003c/p\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e deg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e30\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 30°\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e rad \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edeg \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e Math\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token constant\"\u003ePI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e180\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 角をラジアンに変換。\u003c/span\u003e\n\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 0.5\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 0.8660...\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e上記の結果で、30° の方向に 1 進んだときの、x 座標が 0.5、y 座標がおよそ 0.8660 だということがわかります。\u003c/p\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e deg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e30\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// -30°\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e rad \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edeg \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e Math\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token constant\"\u003ePI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e180\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 角をラジアンに変換。\u003c/span\u003e\n\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// -0.5\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 0.8660...\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e0 を原点とした座標なので、sin/cos の結果がマイナスになる場合もあります。\u003cbr\u003e\n上記コードのように-30° の方向に 1 進んだ y 座標はマイナス値になります。\u003c/p\u003e\n\u003ch3\u003eθ 方向に進む距離を可変にする場合\u003c/h3\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e r \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 青線の長さ\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e deg \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e30\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 30°\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e rad \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edeg \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e Math\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token constant\"\u003ePI\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e \u003cspan class=\"token number\"\u003e180\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 角をラジアンに変換。\u003c/span\u003e\n\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e r\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 2.5\u003c/span\u003e\nMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erad\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e r\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 4.3301...\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eθ 方向に進む距離を 1 ではなく任意の距離にしたい場合があります。\u003cbr\u003e\n先に結論をいうと、距離を\u003ccode\u003er\u003c/code\u003eと置くと、x 座標は\u003ccode\u003esinθ * r\u003c/code\u003e、y 座標は\u003ccode\u003ecosθ * r\u003c/code\u003eで求まります。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"./static/images/7ca0ca88/1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e(x, y), (x, 0), (0, 0)を結ぶと、直角三角形ができるのがわかります。\u003cbr\u003e\nここで青線の長さを変えた場合、同じように点を結んで、できる形はやはり直角三角形で、角 θ の角度は変わりません。\u003c/p\u003e\n\u003cp\u003e2 つの三角形を用意して、2 つの角が共通の場合、その 2 つの三角形は形が同じでスケールが違うだけの関係と証明することができ、相似の条件といいます。\u003c/p\u003e\n\u003cp\u003e上記画像にある青線の長さ 1 の三角形も、長さを r にした三角形も、角 θ と直角が共通しているので、２つの三角形は相似である、ということがわかります。\u003c/p\u003e\n\u003cp\u003e相似であると、各辺の比は、辺の長さに関わらず常に同じなるという特徴があります。\u003cbr\u003e\n青線の長さを 1 から r に変えるということは長さを r 倍にするということなので、相似の三角形の辺である、緑線・赤線の長さも r 倍になります。\u003c/p\u003e\n\u003cp\u003e緑線・赤線はそれぞれ青線を引いた先の(x, y)に対応しています。\u003cbr\u003e\nですので、青線の長さを r 倍にすると、x(cosθ)が r 倍、y(sinθ)が r 倍になります。\u003c/p\u003e\n\u003ch3\u003eタンジェント（tan）\u003c/h3\u003e\n\u003cp\u003e原点(0, 0)から(cosθ, sinθ)まで直線を引いたときの角度、つまり直線と x 軸とのなす角 θ の傾きを tanθ と表します。\u003c/p\u003e\n\u003cp\u003e直線の傾きは\u003ccode\u003eyの増加量 / xの増加量\u003c/code\u003eで求められますから、\u003ccode\u003etanθ = sinθ / cosθ\u003c/code\u003eと考えることができます。\u003c/p\u003e\n\u003ch3\u003eアークタンジェント（atan/atan2）\u003c/h3\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003eMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eatan\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// ラジアン値で返却される\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eatan(x)は tanθ = x となる θ を計算します。\u003c/p\u003e\n\u003cp\u003eつまり直線の傾きを入れると θ を計算してくれるわけです。\u003c/p\u003e\n\u003cp\u003eたとえば atan(1)の場合、傾きが 1 となる角度ですから 45 度に応じたラジアン値（0.7853...）が返却されます。\u003c/p\u003e\n\u003cp\u003eこの関数が返す値の範囲は角度で言うと-90 度～ 90 度までとなります。\u003c/p\u003e\n\u003cp\u003eというのも、円一周 360 度で考えると、傾きが 1 になる角度は、45 度だけではなく 225 度でも同様なのですが、これだと atan はどちらを返せばいいのかが分からなくなりますので、180 度の範囲で限定されているわけです。\u003c/p\u003e\n\u003cp\u003e45 度と 225 度を区別するように範囲を 0 ～ 360 度で考えたい場合は、代替となる atan2 という関数を使用します。\u003c/p\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003eMath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eatan2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// ラジアン値で返却される\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eatan2(y, x)は tanθ = y / x となる θ を計算します。\u003cbr\u003e\n(y, x)と y を先に指定するので注意が必要です。\u003c/p\u003e\n\u003cp\u003eatan(x)と違い、引数には傾きを求める計算前の(y, x)を指定するので、例えば傾きが 45 度で同じになる(1, 1)と(-1, -1)が区別できます。\u003c/p\u003e\n\u003cp\u003eタンジェントの逆関数の値を計算したい場合は atan を、点の偏角を求めたい場合は atan2()を使用するといいでしょう。\u003c/p\u003e\n\u003ch2\u003e内部で利用しているアルゴリズム\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"/13cc4d6d\"\u003eラジアン\u003c/a\u003e\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/[slug]","query":{"slug":"7ca0ca88"},"buildId":"6QakaZ4NG4wZ3_XbKRCFX","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-eef578260fd80f8fff94.js"></script><script src="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" async=""></script><script src="/_next/static/chunks/framework-92300432a1172ef1338b.js" async=""></script><script src="/_next/static/chunks/main-899697ea82bdc85e7a94.js" async=""></script><script src="/_next/static/chunks/pages/_app-752bd3b6185152c691e4.js" async=""></script><script src="/_next/static/chunks/996-fa0b52be06882e958afa.js" async=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-25c36ff5ddc314efe2d1.js" async=""></script><script src="/_next/static/6QakaZ4NG4wZ3_XbKRCFX/_buildManifest.js" async=""></script><script src="/_next/static/6QakaZ4NG4wZ3_XbKRCFX/_ssgManifest.js" async=""></script></body></html>