---
title: "ピクセルソート"
weight: 200
num: 359
hash: "cb4da1c7"
tags: ["image_processing"]
---

## 実行例

### 元画像

![](./static/images/cb4da1c7/0.jpg)

### N = 300

![](./static/images/cb4da1c7/1.png)

### N = 900

![](./static/images/cb4da1c7/2.png)

## ソースコード

### TypeScript

[0.jpg](./static/code/cb4da1c7/0.jpg) / [app.ts](./static/code/cb4da1c7/app.ts)

## 解説/アルゴリズム

1. 画像のピクセルを左から右に、上から下に走査を行い、2. ～ 6. の処理を繰り返して実行します。
1. 今走査している対象のピクセルを A と呼びます。
1. まだ走査していないピクセルの中から、N 個のピクセルをランダムに抽出します。これを B グループと呼びます。
1. A に隣接しているピクセルをいくつか取り出し、これを C グループと呼びます。
1. B グループのピクセルの中から、C グループの各ピクセルと最も色が近いピクセルを選びます。これを D と呼びます。
1. A と D のピクセルの色を入れ替えます。

### 補足

- 4.の、A に隣接しているピクセルは斜めも入れると 8 個ありますが、上記の実行例では上 / 左上 / 左 / 左下のピクセルを対象にしているので結果が[モーションブラー](/8e0a4461/)に近い形になりました。
- 5.の、最も色が近いピクセルを計算するには、B グループから取り出したピクセルと C グループの各ピクセルとの[色の距離](/9cb15253/)を計算し、平均を求めます。上記例では、距離の計算に[マンハッタン距離](/3385ebb2/)を利用しています。
- D の位置にあるピクセルは入れ替えても走査済みにはなりません。
