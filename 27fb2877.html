<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="description" content="グラフィックスプログラミング関連技術についての覚え書き"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.3/dist/katex.min.css" integrity="sha384-ThssJ7YtjywV52Gj4JE/1SQEDoMEckXyhkFVwaf4nDSm5OBlXeedVYjuuUd0Yua+" crossorigin="anonymous"/><title>値を別の値単位で丸める | みさご解体新書</title><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/31a6f04d7f80e58df808.css" as="style"/><link rel="stylesheet" href="/_next/static/css/31a6f04d7f80e58df808.css" data-n-g=""/><link rel="preload" href="/_next/static/css/a7019e71593ecf86edfc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a7019e71593ecf86edfc.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-61095c13c5984b221292.js" defer=""></script><script src="/_next/static/chunks/framework-92300432a1172ef1338b.js" defer=""></script><script src="/_next/static/chunks/main-a3a79aff3ff232b41814.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6b51659702b4e91354dd.js" defer=""></script><script src="/_next/static/chunks/996-9333713592b33abcda8c.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-54b85bfec45890f482f1.js" defer=""></script><script src="/_next/static/uSljV1Ilwp71xVlanF4jV/_buildManifest.js" defer=""></script><script src="/_next/static/uSljV1Ilwp71xVlanF4jV/_ssgManifest.js" defer=""></script></head><body class="bg-bg-color"><div id="__next"><div class="min-h-screen bg-bg-color text-white"><main><div class="container mx-auto max-w-full"><h2 class="bg-gray-700 font-index text-lg text-gray-300 py-7 px-7"><a href="/">みさご解体新書</a></h2><article class="px-8 py-20"><h1 class="font-index text-3xl font-bold mb-16 text-center">値を別の値単位で丸める</h1><div class="max-w-4xl mx-auto"><div class="markdown-styles_markdown__1x9gM"><h2>概要</h2>
<p>2 つの値 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mtext> </mtext><mo stretchy="false">(</mo><mn>0</mn><mo>&lt;</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A, B\thinspace(0 &lt; B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span> を渡すと、A の値に近い B の倍数値を返す。</p>
<p>A が B の倍数なら、そのまま A を返すが、B の倍数でないなら、丸め処理を使用して近い倍数値を返す。</p>
<h2>コード例</h2>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">floor</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> unit<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>value <span class="token operator">/</span> unit<span class="token punctuation">)</span> <span class="token operator">*</span> unit<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">ceil</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> unit<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>value <span class="token operator">/</span> unit<span class="token punctuation">)</span> <span class="token operator">*</span> unit<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> unit <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">floor(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unit<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">floor</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ceil(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unit<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">ceil</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-text"><code class="language-text">floor(-10, 3) = -12
floor(-9, 3) = -9
floor(-8, 3) = -9
floor(-7, 3) = -9
floor(-6, 3) = -6
floor(-5, 3) = -6
floor(-4, 3) = -6
floor(-3, 3) = -3
floor(-2, 3) = -3
floor(-1, 3) = -3
floor(0, 3) = 0
floor(1, 3) = 0
floor(2, 3) = 0
floor(3, 3) = 3
floor(4, 3) = 3
floor(5, 3) = 3
floor(6, 3) = 6
floor(7, 3) = 6
floor(8, 3) = 6
floor(9, 3) = 9
floor(10, 3) = 9

ceil(-10, 3) = -9
ceil(-9, 3) = -9
ceil(-8, 3) = -6
ceil(-7, 3) = -6
ceil(-6, 3) = -6
ceil(-5, 3) = -3
ceil(-4, 3) = -3
ceil(-3, 3) = -3
ceil(-2, 3) = 0
ceil(-1, 3) = 0
ceil(0, 3) = 0
ceil(1, 3) = 3
ceil(2, 3) = 3
ceil(3, 3) = 3
ceil(4, 3) = 6
ceil(5, 3) = 6
ceil(6, 3) = 6
ceil(7, 3) = 9
ceil(8, 3) = 9
ceil(9, 3) = 9
ceil(10, 3) = 12
</code></pre>
<h3>下駄付きで丸める場合</h3>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> interval <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">13</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> start<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token function">ceil</span><span class="token punctuation">(</span>i <span class="token operator">-</span> start<span class="token punctuation">,</span> interval<span class="token punctuation">)</span> <span class="token operator">+</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-text"><code class="language-text">0 5
1 5
2 5
3 5
4 5
5 5
6 11
7 11
8 11
9 11
10 11
11 11
12 17
</code></pre>
<p>下限が 0 でない場合の丸め方。</p>
<p>下限が 5 で、倍数値が 6 で丸める例。</p>
<h2>ソースコード</h2>
<h3>TypeScript</h3>
<p><a href="./static/code/27fb2877/app.ts">app.ts</a></p>
<h3>C++</h3>
<p><a href="./static/code/27fb2877/a.cpp">a.cpp</a></p>
<h2>解説/アルゴリズム</h2>
<h3>floor（左側にある一番近くの倍数値に丸める場合）</h3>
<p>たとえば、 25 を 6 単位で丸める場合、 <code>25 / 6 = 4.16...</code> で割り切れない。</p>
<p>そこで、 <code>4.16...</code> の小数点以下を<a href="/0fd2eac9">切り捨て</a>、整数値 4 に変換する。</p>
<p><code>6 x 4 = 24</code> が 25 を 6 単位で左側に丸めた結果になる。</p>
<p>この関数は負の値でも動作し、たとえば、 -25 を 6 単位で丸めると -30 になる。</p>
<h3>ceil（右側にある一番近くの倍数値に丸める場合）</h3>
<p>たとえば、 25 を 6 単位で丸める場合、 <code>25 / 6 = 4.16...</code> で割り切れない。</p>
<p>そこで、 <code>4.16...</code> の小数点以下を<a href="/286b997e">切り上げ</a>、整数値 5 に変換する。</p>
<p><code>6 x 5 = 30</code> が 25 を 6 単位で右側に丸めた結果になる。</p>
<p>この関数は負の値でも動作し、たとえば、 -25 を 6 単位で丸めると -24 になる。</p>
<h2>内部で利用しているアルゴリズム</h2>
<p><a href="/0fd2eac9">床関数</a>, <a href="/286b997e">天井関数</a>, <a href="/6425003d">ROUND 関数</a></p>
</div></div></article></div></main></div><footer class="bg-gray-700 text-gray-300"><div class="container mx-auto max-w-full"><div class="py-12 flex flex-col items-center"><h3 class="text-base text-center">miku / BAROQUE ENGINE</h3></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"値を別の値単位で丸める","slug":"27fb2877","content":"\u003ch2\u003e概要\u003c/h2\u003e\n\u003cp\u003e2 つの値 \u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003cmo\u003e\u0026lt;\u003c/mo\u003e\u003cmi\u003eB\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA, B\\thinspace(0 \u0026lt; B)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05017em;\"\u003eB\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e を渡すと、A の値に近い B の倍数値を返す。\u003c/p\u003e\n\u003cp\u003eA が B の倍数なら、そのまま A を返すが、B の倍数でないなら、丸め処理を使用して近い倍数値を返す。\u003c/p\u003e\n\u003ch2\u003eコード例\u003c/h2\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003efloor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e unit\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Math\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efloor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e unit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e unit\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eceil\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e unit\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Math\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eceil\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e unit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e unit\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e unit \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003efloor(\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003ei\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003eunit\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e) = \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\u003cspan class=\"token function\"\u003efloor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e unit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003eceil(\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003ei\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003eunit\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e) = \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\u003cspan class=\"token function\"\u003eceil\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e unit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-text\"\u003e\u003ccode class=\"language-text\"\u003efloor(-10, 3) = -12\nfloor(-9, 3) = -9\nfloor(-8, 3) = -9\nfloor(-7, 3) = -9\nfloor(-6, 3) = -6\nfloor(-5, 3) = -6\nfloor(-4, 3) = -6\nfloor(-3, 3) = -3\nfloor(-2, 3) = -3\nfloor(-1, 3) = -3\nfloor(0, 3) = 0\nfloor(1, 3) = 0\nfloor(2, 3) = 0\nfloor(3, 3) = 3\nfloor(4, 3) = 3\nfloor(5, 3) = 3\nfloor(6, 3) = 6\nfloor(7, 3) = 6\nfloor(8, 3) = 6\nfloor(9, 3) = 9\nfloor(10, 3) = 9\n\nceil(-10, 3) = -9\nceil(-9, 3) = -9\nceil(-8, 3) = -6\nceil(-7, 3) = -6\nceil(-6, 3) = -6\nceil(-5, 3) = -3\nceil(-4, 3) = -3\nceil(-3, 3) = -3\nceil(-2, 3) = 0\nceil(-1, 3) = 0\nceil(0, 3) = 0\nceil(1, 3) = 3\nceil(2, 3) = 3\nceil(3, 3) = 3\nceil(4, 3) = 6\nceil(5, 3) = 6\nceil(6, 3) = 6\nceil(7, 3) = 9\nceil(8, 3) = 9\nceil(9, 3) = 9\nceil(10, 3) = 12\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e下駄付きで丸める場合\u003c/h3\u003e\n\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e start \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e interval \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e6\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"token number\"\u003e13\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e start\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e start\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003eceil\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e start\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e interval\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e start\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-text\"\u003e\u003ccode class=\"language-text\"\u003e0 5\n1 5\n2 5\n3 5\n4 5\n5 5\n6 11\n7 11\n8 11\n9 11\n10 11\n11 11\n12 17\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e下限が 0 でない場合の丸め方。\u003c/p\u003e\n\u003cp\u003e下限が 5 で、倍数値が 6 で丸める例。\u003c/p\u003e\n\u003ch2\u003eソースコード\u003c/h2\u003e\n\u003ch3\u003eTypeScript\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"./static/code/27fb2877/app.ts\"\u003eapp.ts\u003c/a\u003e\u003c/p\u003e\n\u003ch3\u003eC++\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"./static/code/27fb2877/a.cpp\"\u003ea.cpp\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003e解説/アルゴリズム\u003c/h2\u003e\n\u003ch3\u003efloor（左側にある一番近くの倍数値に丸める場合）\u003c/h3\u003e\n\u003cp\u003eたとえば、 25 を 6 単位で丸める場合、 \u003ccode\u003e25 / 6 = 4.16...\u003c/code\u003e で割り切れない。\u003c/p\u003e\n\u003cp\u003eそこで、 \u003ccode\u003e4.16...\u003c/code\u003e の小数点以下を\u003ca href=\"/0fd2eac9\"\u003e切り捨て\u003c/a\u003e、整数値 4 に変換する。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e6 x 4 = 24\u003c/code\u003e が 25 を 6 単位で左側に丸めた結果になる。\u003c/p\u003e\n\u003cp\u003eこの関数は負の値でも動作し、たとえば、 -25 を 6 単位で丸めると -30 になる。\u003c/p\u003e\n\u003ch3\u003eceil（右側にある一番近くの倍数値に丸める場合）\u003c/h3\u003e\n\u003cp\u003eたとえば、 25 を 6 単位で丸める場合、 \u003ccode\u003e25 / 6 = 4.16...\u003c/code\u003e で割り切れない。\u003c/p\u003e\n\u003cp\u003eそこで、 \u003ccode\u003e4.16...\u003c/code\u003e の小数点以下を\u003ca href=\"/286b997e\"\u003e切り上げ\u003c/a\u003e、整数値 5 に変換する。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e6 x 5 = 30\u003c/code\u003e が 25 を 6 単位で右側に丸めた結果になる。\u003c/p\u003e\n\u003cp\u003eこの関数は負の値でも動作し、たとえば、 -25 を 6 単位で丸めると -24 になる。\u003c/p\u003e\n\u003ch2\u003e内部で利用しているアルゴリズム\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"/0fd2eac9\"\u003e床関数\u003c/a\u003e, \u003ca href=\"/286b997e\"\u003e天井関数\u003c/a\u003e, \u003ca href=\"/6425003d\"\u003eROUND 関数\u003c/a\u003e\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/[slug]","query":{"slug":"27fb2877"},"buildId":"uSljV1Ilwp71xVlanF4jV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>